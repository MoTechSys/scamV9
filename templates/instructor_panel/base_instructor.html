{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}لوحة الأستاذ{% endblock %} - S-ACM</title>

    <!-- Bootstrap 5 RTL - Local -->
    <link href="{% static 'vendor/bootstrap/bootstrap.rtl.min.css' %}" rel="stylesheet">

    <!-- Bootstrap Icons - Local -->
    <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">

    <!-- Custom Instructor Panel CSS -->
    <link href="{% static 'css/instructor-panel.css' %}" rel="stylesheet">

    {% block extra_css %}{% endblock %}
</head>

<body>
    <div class="instructor-wrapper">
        <!-- Sidebar -->
        <aside class="instructor-sidebar">
            <div class="sidebar-header">
                <a href="{% url 'courses:instructor_dashboard' %}" class="sidebar-brand">
                    <i class="bi bi-mortarboard-fill"></i>
                    <span>S-ACM</span>
                </a>
            </div>

            <nav class="sidebar-nav">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a href="{% url 'courses:instructor_dashboard' %}"
                            class="nav-link {% if active_page == 'dashboard' %}active{% endif %}">
                            <i class="bi bi-speedometer2"></i>
                            <span>الرئيسية</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'courses:instructor_course_list' %}"
                            class="nav-link {% if active_page == 'courses' %}active{% endif %}">
                            <i class="bi bi-book"></i>
                            <span>المقررات</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'courses:instructor_files' %}"
                            class="nav-link {% if active_page == 'files' %}active{% endif %}">
                            <i class="bi bi-folder"></i>
                            <span>الملفات</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'notifications:instructor_list' %}"
                            class="nav-link {% if active_page == 'notifications' %}active{% endif %}">
                            <i class="bi bi-bell"></i>
                            <span>الإشعارات</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'ai_features:instructor_ai' %}"
                            class="nav-link {% if active_page == 'ai' %}active{% endif %}">
                            <i class="bi bi-robot"></i>
                            <span>الذكاء الاصطناعي</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'courses:instructor_stats' %}"
                            class="nav-link {% if active_page == 'stats' %}active{% endif %}">
                            <i class="bi bi-bar-chart"></i>
                            <span>الإحصائيات</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="bi bi-person-circle"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name">{{ user.full_name }}</span>
                        <span class="user-role">عضو هيئة تدريس</span>
                    </div>
                </div>
                <a href="{% url 'accounts:logout' %}" class="btn btn-sm btn-outline-danger w-100 mt-2">
                    <i class="bi bi-box-arrow-right"></i> خروج
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="instructor-main">
            <!-- Top Header -->
            <header class="instructor-header">
                <div class="header-right">
                    <button class="btn btn-link sidebar-toggle d-lg-none">
                        <i class="bi bi-list"></i>
                    </button>
                    <h1 class="page-title">{% block page_title %}لوحة التحكم{% endblock %}</h1>
                </div>
                <div class="header-left">
                    <a href="{% url 'notifications:list' %}" class="header-icon">
                        <i class="bi bi-bell"></i>
                        {% if unread_count > 0 %}
                        <span class="badge bg-danger">{{ unread_count }}</span>
                        {% endif %}
                    </a>
                    <a href="{% url 'accounts:profile' %}" class="header-icon">
                        <i class="bi bi-person-circle"></i>
                    </a>
                </div>
            </header>

            <!-- Page Tabs (if any) -->
            {% block page_tabs %}{% endblock %}

            <!-- Messages -->
            {% if messages %}
            <div class="container-fluid mt-3">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags|default:'info' }} alert-dismissible fade show">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <!-- Page Content -->
            <div class="instructor-content">
                {% block content %}{% endblock %}
            </div>
        </main>
    </div>

    <!-- Bootstrap JS - Local -->
    <script src="{% static 'vendor/bootstrap/bootstrap.bundle.min.js' %}"></script>

    <!-- Instructor Panel JS -->
    <script src="{% static 'js/instructor-panel.js' %}"></script>

    {% block extra_js %}{% endblock %}
</body>

</html>